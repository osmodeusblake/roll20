<input type="hidden" name="attr_statroll" value="&{template:seacat} {{name=D20 Stat Roll}} {{stat=[[@{statquery}]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{strengthstat=[[@{strength}]]}} {{endurancestat=[[@{endurance}]]}} {{agilitystat=[[@{agility}]]}} {{charismastat=[[@{charisma}]]}} {{aurastat=[[@{aura}]]}} {{thoughtstat=[[@{thought}]]}} {{unskilleddisadvantageroll=[[2d20kl1]]}} {{unskilledroll=[[(@{advantagequery})d20kh1]]}} {{skilleddisadvantageroll=[[2d20kl1+@{ranksquery}*@{proficiency}]]}} {{skilledroll=[[(@{advantagequery}+1)d20kh1+@{ranksquery}*@{proficiency}]]}}">

<input type="hidden" name="attr_strengthroll" value="&{template:seacat} {{name=D20 Strength Roll}} {{stat=[[100]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{strengthstat=[[@{strength}]]}} {{unskilleddisadvantageroll=[[2d20kl1+@{strength}]]}} {{unskilledroll=[[(@{advantagequery})d20kh1+@{strength}]]}} {{skilleddisadvantageroll=[[2d20kl1+@{strength}+(@{ranksquery}*@{proficiency})]]}} {{skilledroll=[[(@{advantagequery}+1)d20kh1+@{strength}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_enduranceroll" value="&{template:seacat} {{name=D20 Endurance Roll}} {{stat=[[200]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{endurancestat=[[@{endurance}]]}} {{unskilleddisadvantageroll=[[2d20kl1+@{endurance}]]}} {{unskilledroll=[[(@{advantagequery})d20kh1+@{endurance}]]}} {{skilleddisadvantageroll=[[2d20kl1+@{endurance}+(@{ranksquery}*@{proficiency})]]}} {{skilledroll=[[(@{advantagequery}+1)d20kh1+@{endurance}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_agilityroll" value="&{template:seacat} {{name=D20 Agility Roll}} {{stat=[[300]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{agilitystat=[[@{agility}]]}} {{unskilleddisadvantageroll=[[2d20kl1+@{agility}]]}} {{unskilledroll=[[(@{advantagequery})d20kh1+@{agility}]]}} {{skilleddisadvantageroll=[[2d20kl1+@{agility}+(@{ranksquery}*@{proficiency})]]}} {{skilledroll=[[(@{advantagequery}+1)d20kh1+@{agility}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_charismaroll" value="&{template:seacat} {{name=D20 Charisma Roll}} {{stat=[[400]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{charismastat=[[@{charisma}]]}} {{unskilleddisadvantageroll=[[2d20kl1+@{charisma}]]}} {{unskilledroll=[[(@{advantagequery})d20kh1+@{charisma}]]}} {{skilleddisadvantageroll=[[2d20kl1+@{charisma}+(@{ranksquery}*@{proficiency})]]}} {{skilledroll=[[(@{advantagequery}+1)d20kh1+@{charisma}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_auraroll" value="&{template:seacat} {{name=D20 Aura Roll}} {{stat=[[500]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{aurastat=[[@{aura}]]}} {{unskilleddisadvantageroll=[[2d20kl1+@{aura}]]}} {{unskilledroll=[[(@{advantagequery})d20kh1+@{aura}]]}} {{skilleddisadvantageroll=[[2d20kl1+@{aura}+(@{ranksquery}*@{proficiency})]]}} {{skilledroll=[[(@{advantagequery}+1)d20kh1+@{aura}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_thoughtroll" value="&{template:seacat} {{name=D20 Thought Roll}} {{stat=[[600]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{thoughtstat=[[@{thought}]]}} {{unskilleddisadvantageroll=[[2d20kl1+@{thought}]]}} {{unskilledroll=[[(@{advantagequery})d20kh1+@{thought}]]}} {{skilleddisadvantageroll=[[2d20kl1+@{thought}+(@{ranksquery}*@{proficiency})]]}} {{skilledroll=[[(@{advantagequery}+1)d20kh1+@{thought}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_statquery" value="?{Stat|Strength,100|Endurance,200|Agility,300|Charisma,400|Aura,500|Thought,600}">
<input type="hidden" name="attr_advantagequery" value="?{Advantages|0|1|2|3|4|5|6|7|-1}">
<input type="hidden" name="attr_ranksquery" value="?{Skill ranks|Unskilled (0),-1|Skilled (1),1|Expert (2+),2}">

<rolltemplate class="sheet-rolltemplate-seacat">
	<br> 
	<div>
		<table>
			<tr>
				{{#rollTotal() stat 100}}
				<caption>Strength Roll</caption>
				{{/rollTotal() stat 100}}
				{{#rollTotal() stat 200}}
				<caption>Endurance Roll</caption>
				{{/rollTotal() stat 200}}
				{{#rollTotal() stat 300}}
				<caption>Agility Roll</caption>
				{{/rollTotal() stat 300}}
			</tr>

			<tr><td>Boons & Banes:</td><td>{{advantage}}</td></tr>

			{{#rollLess() ranks 0}}
				<tr><td>Skill Level:</td><td>Unskilled</td></tr>
				{{#rollLess() advantage 1}}
				<tr><td>Result:</td><td>{{unskilleddisadvantageroll}}</td></tr>
				{{/rollLess() advantage 1}}
				{{#rollGreater() advantage 0}}
				<tr><td>Result:</td><td>{{unskilledroll}}</td></tr>
				{{/rollGreater() advantage 0}}
			{{/rollLess() ranks 0}}

			{{#rollTotal() ranks 1}}
				<tr><td>Skill Level:</td><td>Unskilled</td></tr>
				{{#rollLess() advantage 0}}
				<tr></tr><td>Result:</td><td>{{skilleddisadvantageroll}}</td></tr>
				{{/rollLess() advantage 0}}
				{{#rollTotal() advantage 0}}
				<tr><td>Result:</td><td>{{unskilledroll}}</td></tr>
				{{/rollTotal() advantage 0}}
				{{#rollGreater() advantage 0}}
				<tr><td>Result:</td><td>{{unskilledroll}}</td></tr>
				{{/rollGreater() advantage 0}}
			{{/rollTotal() ranks 1}}

			{{#rollTotal() ranks 2}}
				<tr><td>Skill Level:</td><td>Unskilled</td></tr>
				{{#rollLess() advantage 0}}
				<tr></tr><td>Result:</td><td>{{skilleddisadvantageroll}}</td></tr>
				{{/rollLess() advantage 0}}
				{{#rollTotal() advantage 0}}
				<tr><td>Result:</td><td>{{unskilledroll}}</td></tr>
				{{/rollTotal() advantage 0}}
				{{#rollGreater() advantage 0}}
				<tr><td>Result:</td><td>{{unskilledroll}}</td></tr>
				{{/rollGreater() advantage 0}}
			{{/rollTotal() ranks 2}}
		</table>
	</div>
</rolltemplate>

<div></div>
	<div class="gridcontainer">
		<div class="row1">
			<div class="info">
				<div class="field hero">
					<label class="labelh1">NAME:</label>
					<input type="text" name="attr_character_name" tabindex=1>
				</div>
				<div class="infobox">
					<div class="info1">
						<div class="field">
							<label>Archetype:</label>
							<input type="text" name="attr_archetype" tabindex=1>
						</div>
						<div class="field">
							<label>Friends:</label>
							<input type="text" name="attr_friends" tabindex=2>
						</div>
						<div class="field">
							<label>Enemies:</label>
							<input type="text" name="attr_enemies"tabindex=2>
						</div>
						<div class="field">
							<label>Title:</label>
							<input type="text" name="attr_title" tabindex=3>
						</div>
						<div class="field">
							<label>Species:</label>
							<input type="text" name="attr_species" tabindex=4>
						</div>
						<div class="field">
							<label>Looks:</label>
							<input type="text" name="attr_looks" tabindex=5>
						</div>
					</div>
					<div class="info2">
						<div class="field">
							<label>Debt:</label>
							<input type="text" name="attr_debt" tabindex=6>
						</div>
						<div class="field">
							<label>Likes:</label>
							<input type="text" name="attr_likes" tabindex=7>
						</div>
						<div class="field">
							<label>Experience:</label>
							<input type="number"  name="attr_experience" tabindex=8>
						</div>
						<div class="field">
							<label>Invested:</label>
							<input type="number"  name="attr_invested" tabindex=9>
						</div>
						<div class="field">
							<label>Level:</label>
							<input type="number"  name="attr_level" tabindex=10>
						</div>
						<div class="field">
							<label>Magic cost:</label>
							<input type="number" name="attr_magiccost" tabindex=10>
						</div>
					</div>
				</div>
			</div>
			<div class="skills">
				<div class="field">
					<label class="labelh1">SKILLS</label>
				</div>
				<div class="field">
					<label for="attr_skill1">1.</label>
					<input type="text" name="attr_skill1">
				</div>
				<div class="field">
					<label for="attr_skill2">2.</label>
					<input type="text" name="attr_skill2">
				</div>
				<div class="field">
					<label for="attr_skill3">3.</label>
					<input type="text" name="attr_skill3">
				</div>
				<div class="field">
					<label for="attr_skill4">4.</label>
					<input type="text" name="attr_skill4">
				</div>
				<div class="field">
					<label for="attr_skill5">5.</label>
					<input type="text" name="attr_skill5">
				</div>
				<div class="field">
					<label for="attr_skill6">6.</label>
					<input type="text" name="attr_skill6">
				</div>
			</div>
			<div class="abilities">
				<div class="field">
					<label class="labelh1">ABILITIES</label>
				</div>
				<div class="field">
					<label for="attr_ability1">1.</label>
					<input type="text" name="attr_ability1">
				</div>
				<div class="field">
					<label for="attr_ability2">2.</label>
					<input type="text" name="attr_ability2">
				</div>
				<div class="field">
					<label for="attr_ability3">3.</label>
					<input type="text" name="attr_ability3">
				</div>
				<div class="field">
					<label for="attr_ability4">4.</label>
					<input type="text" name="attr_ability4">
				</div>
				<div class="field">
					<label for="attr_ability5">5.</label>
					<input type="text" name="attr_ability5">
				</div>
				<div class="field">
					<label for="attr_ability6">6.</label>
					<input type="text" name="attr_ability6">
				</div>
			</div>
		</div>
		<div class="row2">
			<div class="statbox">
				<div class="stat">
					<div class="statfields">
						<div class="statleft">
							<input type="number" dir="rtl" name="attr_strength" value="0">
						</div>
						<span>OF</span>
						<div class="statright">
							<input type="number" name="attr_strength_max" value="0">
						</div>
					</div>
					<div class="statlabel">
						<button class="sheet-blankrollbutton" type="roll" value="@{strengthroll}" name="rollstrength">STR</button>
					</div>
				</div>
				<div class="stat">
					<div class="statfields">
						<div class="statleft">
							<input type="number" dir="rtl" name="attr_endurance" value="0">
						</div>
						<span>OF</span>
						<div class="statright">
							<input type="number" name="attr_endurance_max" value="0">
						</div>
					</div>
					<div class="statlabel">
						<button class="sheet-blankrollbutton" type="roll" value="@{enduranceroll}" name="rollendurance">END</button>
					</div>
				</div>
				<div class="stat">
					<div class="statfields">
						<div class="statleft">
							<input type="number" dir="rtl" name="attr_agility" value="0">
						</div>
						<span>OF</span>
						<div class="statright">
							<input type="number" name="attr_agility_max" value="0">
						</div>
					</div>
					<div class="statlabel">
						<button class="sheet-blankrollbutton" type="roll" value="@{agilityroll}" name="rollagility">AGI</button>
					</div>
				</div>
				<div class="stat statprof">
					<div class="statfieldsprof">
						<div class="statcenter">
							<input type="number" dir="rtl" name="attr_proficiency" value="0">
						</div>
					</div>
					<div class="statlabel">
						<button class="sheet-blankrollbutton proficiencybutton" type="roll" value="@{statroll}" name="rollproficiency">PRO</button>
					</div>				
				</div>
				<div class="stat">
					<div class="statfields">
						<div class="statleft">
							<input type="number" dir="rtl" name="attr_charisma" value="0">
						</div>
						<span>OF</span>
						<div class="statright">
							<input type="number" name="attr_charisma_max" value="0">
						</div>
					</div>
					<div class="statlabel">
						<button class="sheet-blankrollbutton" type="roll" value="@{charismaroll}" name="rollcharisma">CHA</button>
					</div>
				</div>
				<div class="stat">
					<div class="statfields">
						<div class="statleft">
							<input type="number" dir="rtl" name="attr_aura" value="0">
						</div>
						<span>OF</span>
						<div class="statright">
							<input type="number" name="attr_aura_max" value="0">
						</div>
					</div>
					<div class="statlabel">
						<button class="sheet-blankrollbutton" type="roll" value="@{auraroll}" name="rollaura">AUR</button>
					</div>
				</div>
				<div class="stat">
					<div class="statfields">
						<div class="statleft">
							<input type="number" dir="rtl" name="attr_thought" value="0">
						</div>
						<span>OF</span>
						<div class="statright">
							<input type="number" name="attr_thought_max" value="0">
						</div>
					</div>
					<div class="statlabel">
						<button class="sheet-blankrollbutton" type="roll" value="@{thoughtroll}" name="rollthought">THO</button>
					</div>
				</div>
			</div>
			<div class="sidebox">
				<div class="stat">
					<div class="statlabel">
						<div class="sheet-sideboxlabel">LIFE</div>
					</div>
					<div class="statfields">
							<input type="number" dir="rtl" name="attr_life" value="0">
							<span>OF</span>
							<input type="number" name="attr_life_max" value="0">
					</div>
				</div>
				<div class="stat">
					<div class="statlabel">
						<div class="sheet-sideboxlabel">HERO DICE</div>
					</div>
					<div class="statfields">
							<input type="number" dir="rtl" name="attr_herodice" value="0">
							<span>OF</span>
							<input type="number" name="attr_herodice_max" value="0">
					</div>
				</div>
			</div>
		</div>
		<div class="row3">
			<div class="gearbox">
				<div class="gear1">
					<div class="field">
						<label class="labelh1">GEAR</label>
					</div>
					<div class="field">
						<label for="gear1item1">1.</label>
						<input type="text" name="attr_gear1item1">
					</div>
					<div class="field">
						<label for="gear1item2">2.</label>
						<input type="text" name="attr_gear1item2">
					</div>
					<div class="field">
						<label for="gear1item3">3.</label>
						<input type="text" name="attr_gear1item3">
					</div>
					<div class="field">
						<label for="gear1item4">4.</label>
						<input type="text" name="attr_gear1item4">
					</div>
					<div class="field">
						<label for="gear1item5">5.</label>
						<input type="text" name="attr_gear1item5">
					</div>
					<div class="field">
						<label for="gear1item6">6.</label>
						<input type="text" name="attr_gear1item6">
					</div>
				</div>
				<div class="gear2">
					<div class="field">
						<label class="labelh1">CUMBERSOME GEAR</label>
					</div>
					<div class="field">
						<label for="gear2item1">1.</label>
						<input type="text" name="attr_gear2item1">
					</div>
					<div class="field">
						<label for="gear2item2">2.</label>
						<input type="text" name="attr_gear2item2">
					</div>
					<div class="field">
						<label for="gear2item3">3.</label>
						<input type="text" name="attr_gear2item3">
					</div>
					<div class="field">
						<label for="gear2item4">4.</label>
						<input type="text" name="attr_gear2item4">
					</div>
					<div class="field">
						<label for="gear2item5">5.</label>
						<input type="text" name="attr_gear2item5">
					</div>
					<div class="field">
						<label for="gear2item6">6.</label>
						<input type="text" name="attr_gear2item6">
					</div>
				</div>
			</div>
			<div class="hurtbox">
				<div class="field">
					<label class="labelh1">HURT:</label>
				</div>
				<div class="field">
					<input type="checkbox" name="attr_hurt1">
					<input type="text" name="attr_hurt1description" value="Fine">
				</div>
				<div class="field">
					<input type="checkbox" name="attr_hurt2">
					<input type="text" name="attr_hurt2description" value="Disadvantage [-]">
				</div>
				<div class="field">
					<input type="checkbox" name="attr_hurt3">
					<input type="text" name="attr_hurt3description" value="Slow, half movement">
				</div>
				<div class="field">
					<input type="checkbox" name="attr_hurt4">
					<input type="text" name="attr_hurt4description" value="Max Life halved">
				</div>
				<div class="field">
					<input type="checkbox" name="attr_hurt5">
					<input type="text" name="attr_hurt5description" value="Out of the scene">
				</div>
				<div class="field">
					<input type="checkbox" name="attr_hurt6">
					<input type="text" name="attr_hurt6description" value="Defeat, out of the game">
				</div>
			</div>
		</div>
		<div class="row4">
			<div class="mode1">
				<div class="field">
					<label class="labelh1">ATTACK MODES</label>
				</div>
				<div class="field">
						<label class="labelh2">Method:</label>
					<input type="text" name="attr_Method1">
				</div>
				<div class="field">
					<label for="Damage1">Damage:</label>
					<input type="text" name="attr_Damage1">
				</div>
				<div class="field">
					<label for="Range1">Range:</label>
					<input type="text" name="attr_Range1">
				</div>
				<div class="field">
					<label for="Tags1">Tags:</label>
					<input type="text" name="attr_Tags1">
				</div>
			</div>
			<div class="mode2">
				<div class="field">&nbsp;</div>
				<div class="field">
					<label class="labelh2">Method:</label>
					<input type="text" name="attr_Method2">
				</div>
				<div class="field">
					<label for="Damage1">Damage:</label>
					<input type="text" name="attr_Damage2">
				</div>
				<div class="field">
					<label for="Range1">Range:</label>
					<input type="text" name="attr_Range2">
				</div>
				<div class="field">
					<label for="Tags1">Tags:</label>
					<input type="text" name="attr_Tags2">
				</div>
			</div>
			<div class="mode3">
				<div class="field">&nbsp;</div>
				<div class="field">
					<label class="labelh2">Method:</label>
					<input type="text" name="attr_Method3">
				</div>
				<div class="field">
					<label for="Damage1">Damage:</label>
					<input type="text" name="attr_Damage3">
				</div>
				<div class="field">
					<label for="Range1">Range:</label>
					<input type="text" name="attr_Range3">
				</div>
				<div class="field">
					<label for="Tags1">Tags:</label>
					<input type="text" name="attr_Tags3">
				</div>
			</div>
			<div class="physicalcombat">
				<div class="field">
					<label class="labelh1">COMBAT</label>
				</div>
				<div class="field">
					<label class="labelh2">Physical</label>
				</div>
				<div class="field">
					<label>Defense:</label>
					<input type="text" name="attr_defense">
				</div>
				<div class="field">
					<label>Range Attack:</label>
					<input type="text" name="attr_rangeattack">
				</div>
				<div class="field">
					<label>Melee Attack:</label>
					<input type="text" name="attr_meleeattack">
				</div>
			</div>
		</div>
		<div class="row5">
			<div class="petcolumn1">
				<div class="field">
					<label class="labelh1">SIDEKICK/PET</label>
				</div>
				<div class="field">
					<label>Name:</label>
					<input type="text" name="attr_PetName">
				</div>
				<div class="field">
					<label>Invested XP:</label>
					<input type="text" name="attr_PetInvestedXP">
				</div>
				<div class="field">
					<label>Level:</label>
					<input type="text" name="attr_PetLevel">
				</div>
			</div>
			<div class="petcolumn2">
				<div class="field">&nbsp;</div>
				<div class="field">
					<label>Defense:</label>
					<input type="text" name="attr_PetDefense">
				</div>
				<div class="field">
					<label>Sum:</label>
					<input type="text" name="attr_PetSum">
				</div>
				<div class="field">
					<label>Life:</label>
					<input type="text" name="attr_PetLife">
				</div>			
			</div>
			<div class="petcolumn3">
				<div class="field">&nbsp;</div>
				<div class="field">
					<label for="PetAbility1">Ability:</label>
					<input type="text" name="attr_PetAbility1">
				</div>
				<div class="field">
					<label for="PetAbility2">Ability:</label>
					<input type="text" name="attr_PetAbility2">
				</div>	
				<div class="field">
					<label for="PetAbility3">Ability:</label>
					<input type="text" name="attr_PetAbility3">
				</div>	
			</div>
			<div class="metaphysicalcombat">
				<div class="field">
					<label class="labelh2">Metaphysical</label>
				</div>
				<div class="field">
					<label>Warding:</label>
					<input type="text" name="attr_warding">
				</div>
				<div class="field">
					<label>Magic Attack:</label>
					<input type="text" name="attr_magicattack">
				</div>
				<div class="field">
					<label>Social Attack:</label>
					<input type="text" name="attr_socialattack">
				</div>
			</div>
		</div>
		<div class="row6">
			<div class="field">
				<div class="heading">
					<label class="labelh1">OTHER THINGS</label>
				</div>
			</div>
		</div>
		<div class="row7">
			<div class="notes">
				<div class="notes1">
					<textarea name="attr_notes1"></textarea>
				</div>
				<div class="notes2">
					<textarea name="attr_notes2"></textarea>
				</div>
				<div class="notes3">
					<textarea name="attr_notes3"></textarea>
				</div>
				<div class="notes4">
					<textarea name="attr_notes4"></textarea>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Macros -->

<input type="hidden" name="attr_statroll" value="&{template:seacat} {{name=D20 Stat Roll}} {{stat=[[@{statquery}]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{proficiency=[[@{proficiency}]]}} {{strengthstat=[[@{strength}]]}} {{endurancestat=[[@{endurance}]]}} {{agilitystat=[[@{agility}]]}} {{charismastat=[[@{charisma}]]}} {{aurastat=[[@{aura}]]}} {{thoughtstat=[[@{thought}]]}} {{strbane=[[2d20kl1]]}} {{str=[[(@{advantagequery})d20kh1]]}} {{strprofbane=[[2d20kl1+@{ranksquery}*@{proficiency}]]}} {{strprof=[[(@{advantagequery}+1)d20kh1+@{ranksquery}*@{proficiency}]]}} {{endbane=[[2d20kl1]]}} {{end=[[(@{advantagequery})d20kh1]]}} {{endprofbane=[[2d20kl1+@{ranksquery}*@{proficiency}]]}} {{endprof=[[(@{advantagequery}+1)d20kh1+@{ranksquery}*@{proficiency}]]}} {{agibane=[[2d20kl1]]}} {{agi=[[(@{advantagequery})d20kh1]]}} {{agiprofbane=[[2d20kl1+@{ranksquery}*@{proficiency}]]}} {{agiprof=[[(@{advantagequery}+1)d20kh1+@{ranksquery}*@{proficiency}]]}} {{chabane=[[2d20kl1]]}} {{cha=[[(@{advantagequery})d20kh1]]}} {{chaprofbane=[[2d20kl1+@{ranksquery}*@{proficiency}]]}} {{chaprof=[[(@{advantagequery}+1)d20kh1+@{ranksquery}*@{proficiency}]]}} {{aurbane=[[2d20kl1]]}} {{aur=[[(@{advantagequery})d20kh1]]}} {{aurprofbane=[[2d20kl1+@{ranksquery}*@{proficiency}]]}} {{aurprof=[[(@{advantagequery}+1)d20kh1+@{ranksquery}*@{proficiency}]]}} {{thobane=[[2d20kl1]]}} {{tho=[[(@{advantagequery})d20kh1]]}} {{thoprofbane=[[2d20kl1+@{ranksquery}*@{proficiency}]]}} {{thoprof=[[(@{advantagequery}+1)d20kh1+@{ranksquery}*@{proficiency}]]}}">

<input type="hidden" name="attr_strengthroll" value="&{template:seacat} {{name=D20 Strength Roll}} {{stat=[[100]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{proficiency=[[@{proficiency}]]}} {{strengthstat=[[@{strength}]]}} {{strbane=[[2d20kl1+@{strength}]]}} {{str=[[(@{advantagequery})d20kh1+@{strength}]]}} {{strprofbane=[[2d20kl1+@{strength}+(@{ranksquery}*@{proficiency})]]}} {{strprof=[[(@{advantagequery}+1)d20kh1+@{strength}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_enduranceroll" value="&{template:seacat} {{name=D20 Endurance Roll}} {{stat=[[200]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{proficiency=[[@{proficiency}]]}} {{endurancestat=[[@{endurance}]]}} {{endbane=[[2d20kl1+@{endurance}]]}} {{end=[[(@{advantagequery})d20kh1+@{endurance}]]}} {{endprofbane=[[2d20kl1+@{endurance}+(@{ranksquery}*@{proficiency})]]}} {{endprof=[[(@{advantagequery}+1)d20kh1+@{endurance}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_agilityroll" value="&{template:seacat} {{name=D20 Agility Roll}} {{stat=[[300]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{proficiency=[[@{proficiency}]]}} {{agilitystat=[[@{agility}]]}} {{agibane=[[2d20kl1+@{agility}]]}} {{agi=[[(@{advantagequery})d20kh1+@{agility}]]}} {{agiprofbane=[[2d20kl1+@{agility}+(@{ranksquery}*@{proficiency})]]}} {{agiprof=[[(@{advantagequery}+1)d20kh1+@{agility}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_charismaroll" value="&{template:seacat} {{name=D20 Charisma Roll}} {{stat=[[400]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{proficiency=[[@{proficiency}]]}} {{charismastat=[[@{charisma}]]}} {{chabane=[[2d20kl1+@{charisma}]]}} {{cha=[[(@{advantagequery})d20kh1+@{charisma}]]}} {{chaprofbane=[[2d20kl1+@{charisma}+(@{ranksquery}*@{proficiency})]]}} {{chaprof=[[(@{advantagequery}+1)d20kh1+@{charisma}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_auraroll" value="&{template:seacat} {{name=D20 Aura Roll}} {{stat=[[500]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{proficiency=[[@{proficiency}]]}} {{aurastat=[[@{aura}]]}} {{aurbane=[[2d20kl1+@{aura}]]}} {{aur=[[(@{advantagequery})d20kh1+@{aura}]]}} {{aurprofbane=[[2d20kl1+@{aura}+(@{ranksquery}*@{proficiency})]]}} {{aurprof=[[(@{advantagequery}+1)d20kh1+@{aura}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_thoughtroll" value="&{template:seacat} {{name=D20 Thought Roll}} {{stat=[[600]]}} {{ranks=[[@{ranksquery}]]}} {{advantage=[[@{advantagequery}]]}} {{thoughtstat=[[@{thought}]]}} {{thobane=[[2d20kl1+@{thought}]]}} {{tho=[[(@{advantagequery})d20kh1+@{thought}]]}} {{thoprofbane=[[2d20kl1+@{thought}+(@{ranksquery}*@{proficiency})]]}} {{thoprof=[[(@{advantagequery}+1)d20kh1+@{thought}+(@{ranksquery}*@{proficiency})]]}}">

<input type="hidden" name="attr_statquery" value="?{Stat|Strength,100|Endurance,200|Agility,300|Charisma,400|Aura,500|Thought,600}">
<input type="hidden" name="attr_advantagequery" value="?{Advantages|0|1|2|3|4|5|6|7|-1}">
<input type="hidden" name="attr_ranksquery" value="?{Skill ranks|Unskilled (0),-1|Skilled (1),1|Expert (2+),2}">

<!-- Roll Templates -->

<rolltemplate class="sheet-rolltemplate-seacat">
	<div class="sheet-rolltemplate-seacat-container">
		<div class="sheet-rolltemplate-seacat-left">
			{{#rollTotal() stat 100}}
				<div class="sheet-rolltemplate-seacat-result">
					{{#rollLess() ranks 0}}
						{{#rollLess() advantage 1}}
							{{strbane}}
						{{/rollLess() advantage 1}}
						{{#^rollLess() advantage 1}}
							{{str}}
						{{/^rollLess() advantage 1}}
					{{/rollLess() ranks 0}}
					{{#rollGreater() ranks 0}}
						{{#rollLess() advantage 0}}
							{{strprofbane}}
						{{/rollLess() advantage 0}}
						{{#^rollLess() advantage 0}}
							{{strprof}}
						{{/^rollLess() advantage 0}}
					{{/rollGreater() ranks 0}}
				</div>
			{{/rollTotal() stat 100}}
			{{#rollTotal() stat 200}}
				<div class="sheet-rolltemplate-seacat-result">
					{{#rollLess() ranks 0}}
						{{#rollLess() advantage 1}}
							{{endbane}}
						{{/rollLess() advantage 1}}
						{{#^rollLess() advantage 1}}
							{{end}}
						{{/^rollLess() advantage 1}}
					{{/rollLess() ranks 0}}
					{{#rollGreater() ranks 0}}
						{{#rollLess() advantage 0}}
							{{endprofbane}}
						{{/rollLess() advantage 0}}
						{{#^rollLess() advantage 0}}
							{{endprof}}
						{{/^rollLess() advantage 0}}
					{{/rollGreater() ranks 0}}
				</div>
			{{/rollTotal() stat 200}}
			{{#rollTotal() stat 300}}
				<div class="sheet-rolltemplate-seacat-result">
					{{#rollLess() ranks 0}}
						{{#rollLess() advantage 1}}
							{{agibane}}
						{{/rollLess() advantage 1}}
						{{#^rollLess() advantage 1}}
							{{agi}}
						{{/^rollLess() advantage 1}}
					{{/rollLess() ranks 0}}
					{{#rollGreater() ranks 0}}
						{{#rollLess() advantage 0}}
							{{agiprofbane}}
						{{/rollLess() advantage 0}}
						{{#^rollLess() advantage 0}}
							{{agiprof}}
						{{/^rollLess() advantage 0}}
					{{/rollGreater() ranks 0}}
				</div>
			{{/rollTotal() stat 300}}
			{{#rollTotal() stat 400}}
				<div class="sheet-rolltemplate-seacat-result">
					{{#rollLess() ranks 0}}
						{{#rollLess() advantage 1}}
							{{chabane}}
						{{/rollLess() advantage 1}}
						{{#^rollLess() advantage 1}}
							{{cha}}
						{{/^rollLess() advantage 1}}
					{{/rollLess() ranks 0}}
					{{#rollGreater() ranks 0}}
						{{#rollLess() advantage 0}}
							{{chaprofbane}}
						{{/rollLess() advantage 0}}
						{{#^rollLess() advantage 0}}
							{{chaprof}}
						{{/^rollLess() advantage 0}}
					{{/rollGreater() ranks 0}}
				</div>
			{{/rollTotal() stat 400}}
			{{#rollTotal() stat 500}}
				<div class="sheet-rolltemplate-seacat-result">
					{{#rollLess() ranks 0}}
						{{#rollLess() advantage 1}}
							{{aurbane}}
						{{/rollLess() advantage 1}}
						{{#^rollLess() advantage 1}}
							{{aur}}
						{{/^rollLess() advantage 1}}
					{{/rollLess() ranks 0}}
					{{#rollGreater() ranks 0}}
						{{#rollLess() advantage 0}}
							{{aurprofbane}}
						{{/rollLess() advantage 0}}
						{{#^rollLess() advantage 0}}
							{{aurprof}}
						{{/^rollLess() advantage 0}}
					{{/rollGreater() ranks 0}}			
				</div>
			{{/rollTotal() stat 500}}
			{{#rollTotal() stat 600}}
				<div class="sheet-rolltemplate-seacat-result">
					{{#rollLess() ranks 0}}
						{{#rollLess() advantage 1}}
							{{thobane}}
						{{/rollLess() advantage 1}}
						{{#^rollLess() advantage 1}}
							{{tho}}
						{{/^rollLess() advantage 1}}
					{{/rollLess() ranks 0}}
					{{#rollGreater() ranks 0}}
						{{#rollLess() advantage 0}}
							{{thoprofbane}}
						{{/rollLess() advantage 0}}
						{{#^rollLess() advantage 0}}
							{{thoprof}}
						{{/^rollLess() advantage 0}}
					{{/rollGreater() ranks 0}}			
				</div>
			{{/rollTotal() stat 600}}
		</div>
		<div class="sheet-rolltemplate-seacat-right">
			{{#rollTotal() stat 100}}
				<div class="sheet-rolltemplate-seacat-details">Strength: {{strengthstat}}</div>
			{{/rollTotal() stat 100}}
			{{#rollTotal() stat 200}}
				<div class="sheet-rolltemplate-seacat-details">Endurance: {{endurancestat}}</div>
			{{/rollTotal() stat 200}}
			{{#rollTotal() stat 300}}
				<div class="sheet-rolltemplate-seacat-details">Agility: {{agilitystat}}</div>
			{{/rollTotal() stat 300}}
			{{#rollTotal() stat 400}}
				<div class="sheet-rolltemplate-seacat-details">Charisma: {{charismastat}}</div>
			{{/rollTotal() stat 400}}
			{{#rollTotal() stat 500}}
				<div class="sheet-rolltemplate-seacat-details">Aura: {{aurastat}}</div>
			{{/rollTotal() stat 500}}
			{{#rollTotal() stat 600}}
				<div class="sheet-rolltemplate-seacat-details">Thought: {{thoughtstat}}</div>
			{{/rollTotal() stat 600}}
			{{#rollLess() ranks 0}}
				<div class="sheet-rolltemplate-seacat-details">Skill level: Unskilled</div>
			{{/rollLess() ranks 0}}
			{{#rollTotal() ranks 1}}
				<div class="sheet-rolltemplate-seacat-details">Skill level: Skilled</div>
				<div class="sheet-rolltemplate-seacat-details">Proficiency: {{proficiency}}</div>				
			{{/rollTotal() ranks 1}}
			{{#rollTotal() ranks 2}}
				<div class="sheet-rolltemplate-seacat-details">Skill level: Expert</div>	
				<div class="sheet-rolltemplate-seacat-details">Proficiency: {{proficiency}}</div>		
			{{/rollTotal() ranks 2}}
			{{#rollLess() ranks 0}}
				{{#rollLess() advantage 1}}
					<div class="sheet-rolltemplate-seacat-details">Disadvantage [-]</div>
				{{/rollLess() advantage 1}}
				{{#rollTotal() advantage 2}}
					<div class="sheet-rolltemplate-seacat-details">Advantage [+]</div>
				{{/rollTotal() advantage 2}}
				{{#rollTotal() advantage 3}}
					<div class="sheet-rolltemplate-seacat-details">Advantage [++]</div>
				{{/rollTotal() advantage 3}}
				{{#rollTotal() advantage 4}}
					<div class="sheet-rolltemplate-seacat-details">Advantage [+++]</div>
				{{/rollTotal() advantage 4}}
				{{#rollTotal() advantage 5}}
					<div class="sheet-rolltemplate-seacat-details">Advantage [++++]</div>
				{{/rollTotal() advantage 5}}
				{{#rollTotal() advantage 6}}
					<div class="sheet-rolltemplate-seacat-details">Advantage [+++++]</div>
				{{/rollTotal() advantage 6}}
				{{#rollTotal() advantage 7}}
					<div class="sheet-rolltemplate-seacat-details">Advantage [++++++]</div>
				{{/rollTotal() advantage 7}}
			{{/rollLess() ranks 0}}
			{{#^rollLess() ranks 0}}
				{{#rollLess() advantage 0}}
					<div class="sheet-rolltemplate-seacat-details">Disadvantage [-]</div>
				{{/rollLess() advantage 0}}
				{{#rollTotal() advantage 1}}
				<div class="sheet-rolltemplate-seacat-details">Advantage [+]</div>
			{{/rollTotal() advantage 1}}
			{{#rollTotal() advantage 2}}
				<div class="sheet-rolltemplate-seacat-details">Advantage [++]</div>
			{{/rollTotal() advantage 2}}
			{{#rollTotal() advantage 3}}
				<div class="sheet-rolltemplate-seacat-details">Advantage [+++]</div>
			{{/rollTotal() advantage 3}}
			{{#rollTotal() advantage 4}}
				<div class="sheet-rolltemplate-seacat-details">Advantage [++++]</div>
			{{/rollTotal() advantage 4}}
			{{#rollTotal() advantage 5}}
				<div class="sheet-rolltemplate-seacat-details">Advantage [+++++]</div>
			{{/rollTotal() advantage 5}}
			{{#rollTotal() advantage 5}}
				<div class="sheet-rolltemplate-seacat-details">Advantage [++++++]</div>
			{{/rollTotal() advantage 5}}
			{{#rollTotal() advantage 7}}
				<div class="sheet-rolltemplate-seacat-details">Advantage [+++++++]</div>
			{{/rollTotal() advantage 7}}
			{{/^rollLess() ranks 0}}
		</div>
	</div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-seacat2">
	<div class="sheet-rolltemplate-seacat-container">
		<div class="sheet-rolltemplate-seacat-left">
				<div class="sheet-rolltemplate-seacat-result">11</div>
		</div>
		<div class="sheet-rolltemplate-seacat-right">
				<div class="sheet-rolltemplate-seacat-details"><b>Strength: </b>1</div>
			<div class="sheet-rolltemplate-seacat-details">Proficiency: 2</div>
			<div class="sheet-rolltemplate-seacat-details">Skill level: Unskilled</div>
			<div class="sheet-rolltemplate-seacat-details">Advantages: 1</div>
		</div>
	</div>

</rolltemplate>

<!-- Sheet Workers -->

<script type="text/worker">

on("change:skill1 sheet:opened", function() {  
	getAttrs(["skill1"], function(values) {
		if (values.skill1.includes("*")) {
			setAttrs({                            
				skill1learning: 1
			});
		else {
			setAttrs({
				skill1learning: 0
			});
		};
	});
});

	  on("change:skill2 sheet:opened", function() {  
		getAttrs(["skill2"], function(values) {
	      let learning = values.skill2.includes("*").toString();
		  setAttrs({                            
			skill2learning: learning
		  });
		});
	  });

	  on("change:skill3 sheet:opened", function() {  
		getAttrs(["skill3"], function(values) {
	      let learning = values.skill3.includes("*").toString();
		  setAttrs({                            
			skill3learning: learning
		  });
		});
	  });

	  on("change:skill4 sheet:opened", function() {  
		getAttrs(["skill4"], function(values) {
	      let learning = values.skill4.includes("*").toString();
		  setAttrs({                            
			skill4learning: learning
		  });
		});
	  });

	  on("change:skill5 sheet:opened", function() {  
		getAttrs(["skill5"], function(values) {
	      let learning = values.skill5.includes("*").toString();
		  setAttrs({                            
			skill5learning: learning
		  });
		});
	  });

	  on("change:skill6 sheet:opened", function() {  
		getAttrs(["skill6"], function(values) {
	      let learning = values.skill6.includes("*").toString();
		  setAttrs({                            
			skill6learning: learning
		  });
		});
	  });

</script>